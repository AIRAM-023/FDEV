parameters:
  - name: VSCODE_CLI_ARTIFACT
    type: string
  - name: VSCODE_CHECK_ONLY
    type: boolean
    default: false

steps:
  - ${{ if not(parameters.VSCODE_CHECK_ONLY) }}:
    - ${{ if contains(parameters.VSCODE_CLI_ARTIFACT, 'win32') }}:
      - task: 1ES.PublishPipelineArtifact@1
        inputs:
          targetPath: $(Build.ArtifactStagingDirectory)/${{ parameters.VSCODE_CLI_ARTIFACT }}.zip
          artifactName: ${{ parameters.VSCODE_CLI_ARTIFACT }}
        displayName: Publish ${{ parameters.VSCODE_CLI_ARTIFACT }} artifact

    - ${{ else }}:
      - ${{ if contains(parameters.VSCODE_CLI_ARTIFACT, 'darwin') }}:
        - task: 1ES.PublishPipelineArtifact@1
          inputs:
            targetPath: $(Build.ArtifactStagingDirectory)/${{ parameters.VSCODE_CLI_ARTIFACT }}.zip
            artifactName: ${{ parameters.VSCODE_CLI_ARTIFACT }}
          displayName: Publish ${{ parameters.VSCODE_CLI_ARTIFACT }} artifact

      - ${{ else }}:
        - task: 1ES.PublishPipelineArtifact@1
          inputs:
            targetPath: $(Build.ArtifactStagingDirectory)/${{ parameters.VSCODE_CLI_ARTIFACT }}.tar.gz
            artifactName: ${{ parameters.VSCODE_CLI_ARTIFACT }}
          displayName: Publish ${{ parameters.VSCODE_CLI_ARTIFACT }} artifact
