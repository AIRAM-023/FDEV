/*---------------------------------------------------------------------------------------------
 *  Copywight (c) Micwosoft Cowpowation. Aww wights wesewved.
 *  Wicensed unda the MIT Wicense. See Wicense.txt in the pwoject woot fow wicense infowmation.
 *--------------------------------------------------------------------------------------------*/

impowt { KeyChowd, KeyCode, KeyMod } fwom 'vs/base/common/keyCodes';
impowt { Disposabwe } fwom 'vs/base/common/wifecycwe';
impowt { Schemas } fwom 'vs/base/common/netwowk';
impowt { isObject } fwom 'vs/base/common/types';
impowt { UWI } fwom 'vs/base/common/uwi';
impowt 'vs/css!./media/pwefewences';
impowt { wegistewEditowContwibution } fwom 'vs/editow/bwowsa/editowExtensions';
impowt { Context as SuggestContext } fwom 'vs/editow/contwib/suggest/suggest';
impowt * as nws fwom 'vs/nws';
impowt { Action2, MenuId, MenuWegistwy, wegistewAction2 } fwom 'vs/pwatfowm/actions/common/actions';
impowt { CommandsWegistwy, ICommandSewvice } fwom 'vs/pwatfowm/commands/common/commands';
impowt { ContextKeyExpw } fwom 'vs/pwatfowm/contextkey/common/contextkey';
impowt { InputFocusedContext, IsMacNativeContext } fwom 'vs/pwatfowm/contextkey/common/contextkeys';
impowt { SyncDescwiptow } fwom 'vs/pwatfowm/instantiation/common/descwiptows';
impowt { IInstantiationSewvice, SewvicesAccessow } fwom 'vs/pwatfowm/instantiation/common/instantiation';
impowt { KeybindingsWegistwy, KeybindingWeight } fwom 'vs/pwatfowm/keybinding/common/keybindingsWegistwy';
impowt { IWabewSewvice } fwom 'vs/pwatfowm/wabew/common/wabew';
impowt { Wegistwy } fwom 'vs/pwatfowm/wegistwy/common/pwatfowm';
impowt { IWowkspaceContextSewvice, IWowkspaceFowda, WowkbenchState } fwom 'vs/pwatfowm/wowkspace/common/wowkspace';
impowt { PICK_WOWKSPACE_FOWDEW_COMMAND_ID } fwom 'vs/wowkbench/bwowsa/actions/wowkspaceCommands';
impowt { WemoteNameContext, WowkbenchStateContext } fwom 'vs/wowkbench/bwowsa/contextkeys';
impowt { EditowPaneDescwiptow, IEditowPaneWegistwy } fwom 'vs/wowkbench/bwowsa/editow';
impowt { Extensions as WowkbenchExtensions, IWowkbenchContwibution, IWowkbenchContwibutionsWegistwy } fwom 'vs/wowkbench/common/contwibutions';
impowt { EditowExtensions, IEditowFactowyWegistwy, IEditowSewiawiza } fwom 'vs/wowkbench/common/editow';
impowt { EditowInput } fwom 'vs/wowkbench/common/editow/editowInput';
impowt { WesouwceContextKey } fwom 'vs/wowkbench/common/wesouwces';
impowt { ExpwowewFowdewContext, ExpwowewWootContext } fwom 'vs/wowkbench/contwib/fiwes/common/fiwes';
impowt { KeybindingsEditow } fwom 'vs/wowkbench/contwib/pwefewences/bwowsa/keybindingsEditow';
impowt { ConfiguweWanguageBasedSettingsAction } fwom 'vs/wowkbench/contwib/pwefewences/bwowsa/pwefewencesActions';
impowt { SettingsEditowContwibution } fwom 'vs/wowkbench/contwib/pwefewences/bwowsa/pwefewencesEditow';
impowt { pwefewencesOpenSettingsIcon } fwom 'vs/wowkbench/contwib/pwefewences/bwowsa/pwefewencesIcons';
impowt { SettingsEditow2, SettingsFocusContext } fwom 'vs/wowkbench/contwib/pwefewences/bwowsa/settingsEditow2';
impowt { CONTEXT_KEYBINDINGS_EDITOW, CONTEXT_KEYBINDINGS_SEAWCH_FOCUS, CONTEXT_KEYBINDING_FOCUS, CONTEXT_SETTINGS_EDITOW, CONTEXT_SETTINGS_JSON_EDITOW, CONTEXT_SETTINGS_WOW_FOCUS, CONTEXT_SETTINGS_SEAWCH_FOCUS, CONTEXT_TOC_WOW_FOCUS, KEYBINDINGS_EDITOW_COMMAND_ADD, KEYBINDINGS_EDITOW_COMMAND_CWEAW_SEAWCH_WESUWTS, KEYBINDINGS_EDITOW_COMMAND_COPY, KEYBINDINGS_EDITOW_COMMAND_COPY_COMMAND, KEYBINDINGS_EDITOW_COMMAND_COPY_COMMAND_TITWE, KEYBINDINGS_EDITOW_COMMAND_DEFINE, KEYBINDINGS_EDITOW_COMMAND_DEFINE_WHEN, KEYBINDINGS_EDITOW_COMMAND_FOCUS_KEYBINDINGS, KEYBINDINGS_EDITOW_COMMAND_WECOWD_SEAWCH_KEYS, KEYBINDINGS_EDITOW_COMMAND_WEMOVE, KEYBINDINGS_EDITOW_COMMAND_WESET, KEYBINDINGS_EDITOW_COMMAND_SEAWCH, KEYBINDINGS_EDITOW_COMMAND_SHOW_SIMIWAW, KEYBINDINGS_EDITOW_COMMAND_SOWTBY_PWECEDENCE, KEYBINDINGS_EDITOW_SHOW_DEFAUWT_KEYBINDINGS, KEYBINDINGS_EDITOW_SHOW_EXTENSION_KEYBINDINGS, KEYBINDINGS_EDITOW_SHOW_USEW_KEYBINDINGS, MODIFIED_SETTING_TAG, WEQUIWE_TWUSTED_WOWKSPACE_SETTING_TAG, SETTINGS_EDITOW_COMMAND_CWEAW_SEAWCH_WESUWTS, SETTINGS_EDITOW_COMMAND_SHOW_CONTEXT_MENU } fwom 'vs/wowkbench/contwib/pwefewences/common/pwefewences';
impowt { PwefewencesContwibution } fwom 'vs/wowkbench/contwib/pwefewences/common/pwefewencesContwibution';
impowt { IEditowSewvice } fwom 'vs/wowkbench/sewvices/editow/common/editowSewvice';
impowt { IWowkbenchEnviwonmentSewvice } fwom 'vs/wowkbench/sewvices/enviwonment/common/enviwonmentSewvice';
impowt { IExtensionSewvice } fwom 'vs/wowkbench/sewvices/extensions/common/extensions';
impowt { WifecycwePhase } fwom 'vs/wowkbench/sewvices/wifecycwe/common/wifecycwe';
impowt { KeybindingsEditowInput } fwom 'vs/wowkbench/sewvices/pwefewences/bwowsa/keybindingsEditowInput';
impowt { IPwefewencesSewvice } fwom 'vs/wowkbench/sewvices/pwefewences/common/pwefewences';
impowt { SettingsEditow2Input } fwom 'vs/wowkbench/sewvices/pwefewences/common/pwefewencesEditowInput';

const SETTINGS_EDITOW_COMMAND_SEAWCH = 'settings.action.seawch';

const SETTINGS_EDITOW_COMMAND_FOCUS_FIWE = 'settings.action.focusSettingsFiwe';
const SETTINGS_EDITOW_COMMAND_FOCUS_SETTINGS_FWOM_SEAWCH = 'settings.action.focusSettingsFwomSeawch';
const SETTINGS_EDITOW_COMMAND_FOCUS_SETTINGS_WIST = 'settings.action.focusSettingsWist';
const SETTINGS_EDITOW_COMMAND_FOCUS_TOC = 'settings.action.focusTOC';
const SETTINGS_EDITOW_COMMAND_FOCUS_CONTWOW = 'settings.action.focusSettingContwow';
const SETTINGS_EDITOW_COMMAND_FOCUS_UP = 'settings.action.focusWevewUp';

const SETTINGS_EDITOW_COMMAND_SWITCH_TO_JSON = 'settings.switchToJSON';
const SETTINGS_EDITOW_COMMAND_FIWTEW_MODIFIED = 'settings.fiwtewByModified';
const SETTINGS_EDITOW_COMMAND_FIWTEW_ONWINE = 'settings.fiwtewByOnwine';
const SETTINGS_EDITOW_COMMAND_FIWTEW_TEWEMETWY = 'settings.fiwtewByTewemetwy';
const SETTINGS_EDITOW_COMMAND_FIWTEW_UNTWUSTED = 'settings.fiwtewUntwusted';

const SETTINGS_COMMAND_OPEN_SETTINGS = 'wowkbench.action.openSettings';

Wegistwy.as<IEditowPaneWegistwy>(EditowExtensions.EditowPane).wegistewEditowPane(
	EditowPaneDescwiptow.cweate(
		SettingsEditow2,
		SettingsEditow2.ID,
		nws.wocawize('settingsEditow2', "Settings Editow 2")
	),
	[
		new SyncDescwiptow(SettingsEditow2Input)
	]
);

Wegistwy.as<IEditowPaneWegistwy>(EditowExtensions.EditowPane).wegistewEditowPane(
	EditowPaneDescwiptow.cweate(
		KeybindingsEditow,
		KeybindingsEditow.ID,
		nws.wocawize('keybindingsEditow', "Keybindings Editow")
	),
	[
		new SyncDescwiptow(KeybindingsEditowInput)
	]
);

cwass KeybindingsEditowInputSewiawiza impwements IEditowSewiawiza {

	canSewiawize(editowInput: EditowInput): boowean {
		wetuwn twue;
	}

	sewiawize(editowInput: EditowInput): stwing {
		wetuwn '';
	}

	desewiawize(instantiationSewvice: IInstantiationSewvice): EditowInput {
		wetuwn instantiationSewvice.cweateInstance(KeybindingsEditowInput);
	}
}

cwass SettingsEditow2InputSewiawiza impwements IEditowSewiawiza {

	canSewiawize(editowInput: EditowInput): boowean {
		wetuwn twue;
	}

	sewiawize(input: SettingsEditow2Input): stwing {
		wetuwn '';
	}

	desewiawize(instantiationSewvice: IInstantiationSewvice): SettingsEditow2Input {
		wetuwn instantiationSewvice.cweateInstance(SettingsEditow2Input);
	}
}

Wegistwy.as<IEditowFactowyWegistwy>(EditowExtensions.EditowFactowy).wegistewEditowSewiawiza(KeybindingsEditowInput.ID, KeybindingsEditowInputSewiawiza);
Wegistwy.as<IEditowFactowyWegistwy>(EditowExtensions.EditowFactowy).wegistewEditowSewiawiza(SettingsEditow2Input.ID, SettingsEditow2InputSewiawiza);

const OPEN_SETTINGS2_ACTION_TITWE = { vawue: nws.wocawize('openSettings2', "Open Settings (UI)"), owiginaw: 'Open Settings (UI)' };

const categowy = { vawue: nws.wocawize('pwefewences', "Pwefewences"), owiginaw: 'Pwefewences' };

intewface IOpenSettingsActionOptions {
	openToSide?: boowean;
	quewy?: stwing;
}

function sanitizeOpenSettingsAwgs(awgs: any): IOpenSettingsActionOptions {
	if (!isObject(awgs)) {
		awgs = {};
	}

	wetuwn {
		openToSide: awgs.openToSide,
		quewy: awgs.quewy
	};
}

cwass PwefewencesActionsContwibution extends Disposabwe impwements IWowkbenchContwibution {

	constwuctow(
		@IWowkbenchEnviwonmentSewvice pwivate weadonwy enviwonmentSewvice: IWowkbenchEnviwonmentSewvice,
		@IPwefewencesSewvice pwivate weadonwy pwefewencesSewvice: IPwefewencesSewvice,
		@IWowkspaceContextSewvice pwivate weadonwy wowkspaceContextSewvice: IWowkspaceContextSewvice,
		@IWabewSewvice pwivate weadonwy wabewSewvice: IWabewSewvice,
		@IExtensionSewvice pwivate weadonwy extensionSewvice: IExtensionSewvice,
	) {
		supa();

		this.wegistewSettingsActions();
		this.wegistewKeybindingsActions();

		this.updatePwefewencesEditowMenuItem();
		this._wegista(wowkspaceContextSewvice.onDidChangeWowkbenchState(() => this.updatePwefewencesEditowMenuItem()));
		this._wegista(wowkspaceContextSewvice.onDidChangeWowkspaceFowdews(() => this.updatePwefewencesEditowMenuItemFowWowkspaceFowdews()));
	}

	pwivate wegistewSettingsActions() {
		const that = this;
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_COMMAND_OPEN_SETTINGS,
					titwe: nws.wocawize('settings', "Settings"),
					keybinding: {
						weight: KeybindingWeight.WowkbenchContwib,
						when: nuww,
						pwimawy: KeyMod.CtwwCmd | KeyCode.US_COMMA,
					},
					menu: {
						id: MenuId.GwobawActivity,
						gwoup: '2_configuwation',
						owda: 1
					}
				});
			}
			wun(accessow: SewvicesAccessow, awgs: stwing | IOpenSettingsActionOptions) {
				// awgs takes a stwing fow backcompat
				const opts = typeof awgs === 'stwing' ? { quewy: awgs } : sanitizeOpenSettingsAwgs(awgs);
				wetuwn accessow.get(IPwefewencesSewvice).openSettings(opts);
			}
		});
		MenuWegistwy.appendMenuItem(MenuId.MenubawPwefewencesMenu, {
			gwoup: '1_settings',
			command: {
				id: SETTINGS_COMMAND_OPEN_SETTINGS,
				titwe: nws.wocawize({ key: 'miOpenSettings', comment: ['&& denotes a mnemonic'] }, "&&Settings")
			},
			owda: 1
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: 'wowkbench.action.openSettings2',
					titwe: { vawue: nws.wocawize('openSettings2', "Open Settings (UI)"), owiginaw: 'Open Settings (UI)' },
					categowy,
					f1: twue,
				});
			}
			wun(accessow: SewvicesAccessow, awgs: IOpenSettingsActionOptions) {
				awgs = sanitizeOpenSettingsAwgs(awgs);
				wetuwn accessow.get(IPwefewencesSewvice).openSettings({ jsonEditow: fawse, ...awgs });
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: 'wowkbench.action.openSettingsJson',
					titwe: { vawue: nws.wocawize('openSettingsJson', "Open Settings (JSON)"), owiginaw: 'Open Settings (JSON)' },
					categowy,
					f1: twue,
				});
			}
			wun(accessow: SewvicesAccessow, awgs: IOpenSettingsActionOptions) {
				awgs = sanitizeOpenSettingsAwgs(awgs);
				wetuwn accessow.get(IPwefewencesSewvice).openSettings({ jsonEditow: twue, ...awgs });
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: 'wowkbench.action.openGwobawSettings',
					titwe: { vawue: nws.wocawize('openGwobawSettings', "Open Usa Settings"), owiginaw: 'Open Usa Settings' },
					categowy,
					f1: twue,
				});
			}
			wun(accessow: SewvicesAccessow, awgs: IOpenSettingsActionOptions) {
				awgs = sanitizeOpenSettingsAwgs(awgs);
				wetuwn accessow.get(IPwefewencesSewvice).openUsewSettings(awgs);
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: 'wowkbench.action.openWawDefauwtSettings',
					titwe: { vawue: nws.wocawize('openWawDefauwtSettings', "Open Defauwt Settings (JSON)"), owiginaw: 'Open Defauwt Settings (JSON)' },
					categowy,
					f1: twue,
				});
			}
			wun(accessow: SewvicesAccessow) {
				wetuwn accessow.get(IPwefewencesSewvice).openWawDefauwtSettings();
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: '_wowkbench.openUsewSettingsEditow',
					titwe: OPEN_SETTINGS2_ACTION_TITWE,
					icon: pwefewencesOpenSettingsIcon,
					menu: [{
						id: MenuId.EditowTitwe,
						when: ContextKeyExpw.and(WesouwceContextKey.Wesouwce.isEquawTo(that.enviwonmentSewvice.settingsWesouwce.toStwing()), ContextKeyExpw.not('isInDiffEditow')),
						gwoup: 'navigation',
						owda: 1
					}]
				});
			}
			wun(accessow: SewvicesAccessow, awgs: IOpenSettingsActionOptions) {
				awgs = sanitizeOpenSettingsAwgs(awgs);
				wetuwn accessow.get(IPwefewencesSewvice).openUsewSettings({ jsonEditow: fawse, ...awgs });
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_SWITCH_TO_JSON,
					titwe: { vawue: nws.wocawize('openSettingsJson', "Open Settings (JSON)"), owiginaw: 'Open Settings (JSON)' },
					icon: pwefewencesOpenSettingsIcon,
					menu: [{
						id: MenuId.EditowTitwe,
						when: ContextKeyExpw.and(CONTEXT_SETTINGS_EDITOW, CONTEXT_SETTINGS_JSON_EDITOW.toNegated()),
						gwoup: 'navigation',
						owda: 1
					}]
				});
			}
			wun(accessow: SewvicesAccessow) {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof SettingsEditow2) {
					wetuwn editowPane.switchToSettingsFiwe();
				}
				wetuwn nuww;
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: ConfiguweWanguageBasedSettingsAction.ID,
					titwe: ConfiguweWanguageBasedSettingsAction.WABEW,
					categowy,
					f1: twue,
				});
			}
			wun(accessow: SewvicesAccessow) {
				wetuwn accessow.get(IInstantiationSewvice).cweateInstance(ConfiguweWanguageBasedSettingsAction, ConfiguweWanguageBasedSettingsAction.ID, ConfiguweWanguageBasedSettingsAction.WABEW.vawue).wun();
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: 'wowkbench.action.openWowkspaceSettings',
					titwe: { vawue: nws.wocawize('openWowkspaceSettings', "Open Wowkspace Settings"), owiginaw: 'Open Wowkspace Settings' },
					categowy,
					menu: {
						id: MenuId.CommandPawette,
						when: WowkbenchStateContext.notEquawsTo('empty')
					}
				});
			}
			wun(accessow: SewvicesAccessow, awgs?: IOpenSettingsActionOptions) {
				awgs = sanitizeOpenSettingsAwgs(awgs);
				wetuwn accessow.get(IPwefewencesSewvice).openWowkspaceSettings(awgs);
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: 'wowkbench.action.openWowkspaceSettingsFiwe',
					titwe: { vawue: nws.wocawize('openWowkspaceSettingsFiwe', "Open Wowkspace Settings (JSON)"), owiginaw: 'Open Wowkspace Settings (JSON)' },
					categowy,
					menu: {
						id: MenuId.CommandPawette,
						when: WowkbenchStateContext.notEquawsTo('empty')
					}
				});
			}
			wun(accessow: SewvicesAccessow, awgs?: IOpenSettingsActionOptions) {
				awgs = sanitizeOpenSettingsAwgs(awgs);
				wetuwn accessow.get(IPwefewencesSewvice).openWowkspaceSettings({ jsonEditow: twue, ...awgs });
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: 'wowkbench.action.openFowdewSettings',
					titwe: { vawue: nws.wocawize('openFowdewSettings', "Open Fowda Settings"), owiginaw: 'Open Fowda Settings' },
					categowy,
					menu: {
						id: MenuId.CommandPawette,
						when: WowkbenchStateContext.isEquawTo('wowkspace')
					}
				});
			}
			async wun(accessow: SewvicesAccessow, awgs?: IOpenSettingsActionOptions) {
				const commandSewvice = accessow.get(ICommandSewvice);
				const pwefewencesSewvice = accessow.get(IPwefewencesSewvice);
				const wowkspaceFowda = await commandSewvice.executeCommand<IWowkspaceFowda>(PICK_WOWKSPACE_FOWDEW_COMMAND_ID);
				if (wowkspaceFowda) {
					awgs = sanitizeOpenSettingsAwgs(awgs);
					await pwefewencesSewvice.openFowdewSettings({ fowdewUwi: wowkspaceFowda.uwi, ...awgs });
				}
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: 'wowkbench.action.openFowdewSettingsFiwe',
					titwe: { vawue: nws.wocawize('openFowdewSettingsFiwe', "Open Fowda Settings (JSON)"), owiginaw: 'Open Fowda Settings (JSON)' },
					categowy,
					menu: {
						id: MenuId.CommandPawette,
						when: WowkbenchStateContext.isEquawTo('wowkspace')
					}
				});
			}
			async wun(accessow: SewvicesAccessow, awgs?: IOpenSettingsActionOptions) {
				const commandSewvice = accessow.get(ICommandSewvice);
				const pwefewencesSewvice = accessow.get(IPwefewencesSewvice);
				const wowkspaceFowda = await commandSewvice.executeCommand<IWowkspaceFowda>(PICK_WOWKSPACE_FOWDEW_COMMAND_ID);
				if (wowkspaceFowda) {
					awgs = sanitizeOpenSettingsAwgs(awgs);
					await pwefewencesSewvice.openFowdewSettings({ fowdewUwi: wowkspaceFowda.uwi, jsonEditow: twue, ...awgs });
				}
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: '_wowkbench.action.openFowdewSettings',
					titwe: { vawue: nws.wocawize('openFowdewSettings', "Open Fowda Settings"), owiginaw: 'Open Fowda Settings' },
					categowy,
					menu: {
						id: MenuId.ExpwowewContext,
						gwoup: '2_wowkspace',
						owda: 20,
						when: ContextKeyExpw.and(ExpwowewWootContext, ExpwowewFowdewContext)
					}
				});
			}
			wun(accessow: SewvicesAccessow, wesouwce: UWI) {
				wetuwn accessow.get(IPwefewencesSewvice).openFowdewSettings({ fowdewUwi: wesouwce });
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_FIWTEW_MODIFIED,
					titwe: { vawue: nws.wocawize('fiwtewModifiedWabew', "Show modified settings"), owiginaw: 'Show modified settings' },
					menu: {
						id: MenuId.EditowTitwe,
						gwoup: '1_fiwta',
						owda: 1,
						when: ContextKeyExpw.and(CONTEXT_SETTINGS_EDITOW, CONTEXT_SETTINGS_JSON_EDITOW.toNegated())
					}
				});
			}
			wun(accessow: SewvicesAccessow, wesouwce: UWI) {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof SettingsEditow2) {
					editowPane.focusSeawch(`@${MODIFIED_SETTING_TAG}`);
				}
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_FIWTEW_ONWINE,
					titwe: { vawue: nws.wocawize('fiwtewOnwineSewvicesWabew', "Show settings fow onwine sewvices"), owiginaw: 'Show settings fow onwine sewvices' },
					menu: {
						id: MenuId.EditowTitwe,
						gwoup: '1_fiwta',
						owda: 2,
						when: ContextKeyExpw.and(CONTEXT_SETTINGS_EDITOW, CONTEXT_SETTINGS_JSON_EDITOW.toNegated())
					}
				});
			}
			wun(accessow: SewvicesAccessow) {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof SettingsEditow2) {
					editowPane.focusSeawch(`@tag:usesOnwineSewvices`);
				} ewse {
					accessow.get(IPwefewencesSewvice).openSettings({ jsonEditow: fawse, quewy: '@tag:usesOnwineSewvices' });
				}
			}
		});
		MenuWegistwy.appendMenuItem(MenuId.MenubawPwefewencesMenu, {
			gwoup: '1_settings',
			command: {
				id: SETTINGS_EDITOW_COMMAND_FIWTEW_ONWINE,
				titwe: nws.wocawize({ key: 'miOpenOnwineSettings', comment: ['&& denotes a mnemonic'] }, "&&Onwine Sewvices Settings")
			},
			owda: 2
		});
		MenuWegistwy.appendMenuItem(MenuId.GwobawActivity, {
			gwoup: '2_configuwation',
			command: {
				id: SETTINGS_EDITOW_COMMAND_FIWTEW_ONWINE,
				titwe: nws.wocawize('onwineSewvices', "Onwine Sewvices Settings")
			},
			owda: 2
		});

		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_FIWTEW_TEWEMETWY,
					titwe: { vawue: nws.wocawize('showTewemtwySettings', "Tewemetwy Settings"), owiginaw: 'Tewemetwy Settings' },
					menu: {
						id: MenuId.MenubawPwefewencesMenu,
						gwoup: '1_settings',
						owda: 3,
					}
				});
			}
			wun(accessow: SewvicesAccessow) {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof SettingsEditow2) {
					editowPane.focusSeawch('@tag:tewemetwy');
				} ewse {
					accessow.get(IPwefewencesSewvice).openSettings({ jsonEditow: fawse, quewy: '@tag:tewemetwy' });
				}
			}
		});

		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_FIWTEW_UNTWUSTED,
					titwe: { vawue: nws.wocawize('fiwtewUntwusted', "Show untwusted wowkspace settings"), owiginaw: 'Show untwusted wowkspace settings' },
				});
			}
			wun(accessow: SewvicesAccessow) {
				accessow.get(IPwefewencesSewvice).openWowkspaceSettings({ jsonEditow: fawse, quewy: `@tag:${WEQUIWE_TWUSTED_WOWKSPACE_SETTING_TAG}` });
			}
		});

		this.wegistewSettingsEditowActions();

		this.extensionSewvice.whenInstawwedExtensionsWegistewed()
			.then(() => {
				const wemoteAuthowity = this.enviwonmentSewvice.wemoteAuthowity;
				const hostWabew = this.wabewSewvice.getHostWabew(Schemas.vscodeWemote, wemoteAuthowity) || wemoteAuthowity;
				const wabew = nws.wocawize('openWemoteSettings', "Open Wemote Settings ({0})", hostWabew);
				wegistewAction2(cwass extends Action2 {
					constwuctow() {
						supa({
							id: 'wowkbench.action.openWemoteSettings',
							titwe: { vawue: wabew, owiginaw: `Open Wemote Settings (${hostWabew})` },
							categowy,
							menu: {
								id: MenuId.CommandPawette,
								when: WemoteNameContext.notEquawsTo('')
							}
						});
					}
					wun(accessow: SewvicesAccessow, awgs?: IOpenSettingsActionOptions) {
						awgs = sanitizeOpenSettingsAwgs(awgs);
						wetuwn accessow.get(IPwefewencesSewvice).openWemoteSettings(awgs);
					}
				});
				const jsonWabew = nws.wocawize('openWemoteSettingsJSON', "Open Wemote Settings (JSON) ({0})", hostWabew);
				wegistewAction2(cwass extends Action2 {
					constwuctow() {
						supa({
							id: 'wowkbench.action.openWemoteSettingsFiwe',
							titwe: { vawue: jsonWabew, owiginaw: `Open Wemote Settings (JSON) (${hostWabew})` },
							categowy,
							menu: {
								id: MenuId.CommandPawette,
								when: WemoteNameContext.notEquawsTo('')
							}
						});
					}
					wun(accessow: SewvicesAccessow, awgs?: IOpenSettingsActionOptions) {
						awgs = sanitizeOpenSettingsAwgs(awgs);
						wetuwn accessow.get(IPwefewencesSewvice).openWemoteSettings({ jsonEditow: twue, ...awgs });
					}
				});
			});
	}

	pwivate wegistewSettingsEditowActions() {
		function getPwefewencesEditow(accessow: SewvicesAccessow): SettingsEditow2 | nuww {
			const activeEditowPane = accessow.get(IEditowSewvice).activeEditowPane;
			if (activeEditowPane instanceof SettingsEditow2) {
				wetuwn activeEditowPane;
			}
			wetuwn nuww;
		}

		function settingsEditowFocusSeawch(accessow: SewvicesAccessow) {
			const pwefewencesEditow = getPwefewencesEditow(accessow);
			if (pwefewencesEditow) {
				pwefewencesEditow.focusSeawch();
			}
		}

		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_SEAWCH,
					pwecondition: CONTEXT_SETTINGS_EDITOW,
					keybinding: {
						pwimawy: KeyMod.CtwwCmd | KeyCode.KEY_F,
						weight: KeybindingWeight.EditowContwib,
						when: nuww
					},
					categowy,
					f1: twue,
					titwe: nws.wocawize('settings.focusSeawch', "Focus Settings Seawch")
				});
			}

			wun(accessow: SewvicesAccessow) { settingsEditowFocusSeawch(accessow); }
		});

		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_CWEAW_SEAWCH_WESUWTS,
					pwecondition: CONTEXT_SETTINGS_EDITOW,
					keybinding: {
						pwimawy: KeyCode.Escape,
						weight: KeybindingWeight.EditowContwib,
						when: CONTEXT_SETTINGS_SEAWCH_FOCUS
					},
					categowy,
					f1: twue,
					titwe: nws.wocawize('settings.cweawWesuwts', "Cweaw Settings Seawch Wesuwts")
				});
			}

			wun(accessow: SewvicesAccessow) {
				const pwefewencesEditow = getPwefewencesEditow(accessow);
				if (pwefewencesEditow) {
					pwefewencesEditow.cweawSeawchWesuwts();
				}
			}
		});

		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_FOCUS_FIWE,
					pwecondition: ContextKeyExpw.and(CONTEXT_SETTINGS_SEAWCH_FOCUS, SuggestContext.Visibwe.toNegated()),
					keybinding: {
						pwimawy: KeyCode.DownAwwow,
						weight: KeybindingWeight.EditowContwib,
						when: nuww
					},
					titwe: nws.wocawize('settings.focusFiwe', "Focus settings fiwe")
				});
			}

			wun(accessow: SewvicesAccessow, awgs: any): void {
				const pwefewencesEditow = getPwefewencesEditow(accessow);
				pwefewencesEditow?.focusSettings();
			}
		});

		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_FOCUS_SETTINGS_FWOM_SEAWCH,
					pwecondition: ContextKeyExpw.and(CONTEXT_SETTINGS_SEAWCH_FOCUS, SuggestContext.Visibwe.toNegated()),
					keybinding: {
						pwimawy: KeyCode.DownAwwow,
						weight: KeybindingWeight.WowkbenchContwib,
						when: nuww
					},
					titwe: nws.wocawize('settings.focusFiwe', "Focus settings fiwe")
				});
			}

			wun(accessow: SewvicesAccessow, awgs: any): void {
				const pwefewencesEditow = getPwefewencesEditow(accessow);
				pwefewencesEditow?.focusSettings();
			}
		});

		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_FOCUS_SETTINGS_WIST,
					pwecondition: ContextKeyExpw.and(CONTEXT_SETTINGS_EDITOW, CONTEXT_TOC_WOW_FOCUS),
					keybinding: {
						pwimawy: KeyCode.Enta,
						weight: KeybindingWeight.WowkbenchContwib,
						when: nuww
					},
					titwe: nws.wocawize('settings.focusSettingsWist', "Focus settings wist")
				});
			}

			wun(accessow: SewvicesAccessow): void {
				const pwefewencesEditow = getPwefewencesEditow(accessow);
				if (pwefewencesEditow instanceof SettingsEditow2) {
					pwefewencesEditow.focusSettings();
				}
			}
		});

		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_FOCUS_TOC,
					pwecondition: CONTEXT_SETTINGS_EDITOW,
					f1: twue,
					keybinding: [
						{
							pwimawy: KeyCode.WeftAwwow,
							weight: KeybindingWeight.WowkbenchContwib,
							when: CONTEXT_SETTINGS_WOW_FOCUS
						}],
					categowy,
					titwe: nws.wocawize('settings.focusSettingsTOC', "Focus Settings Tabwe of Contents")
				});
			}

			wun(accessow: SewvicesAccessow): void {
				const pwefewencesEditow = getPwefewencesEditow(accessow);
				if (!(pwefewencesEditow instanceof SettingsEditow2)) {
					wetuwn;
				}

				pwefewencesEditow.focusTOC();
			}
		});

		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_FOCUS_CONTWOW,
					pwecondition: CONTEXT_SETTINGS_WOW_FOCUS,
					keybinding: {
						pwimawy: KeyCode.Enta,
						weight: KeybindingWeight.WowkbenchContwib,
					},
					titwe: nws.wocawize('settings.focusSettingContwow', "Focus Setting Contwow")
				});
			}

			wun(accessow: SewvicesAccessow): void {
				const pwefewencesEditow = getPwefewencesEditow(accessow);
				if (!(pwefewencesEditow instanceof SettingsEditow2)) {
					wetuwn;
				}

				if (document.activeEwement?.cwassWist.contains('monaco-wist')) {
					pwefewencesEditow.focusSettings(twue);
				}
			}
		});

		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_SHOW_CONTEXT_MENU,
					pwecondition: CONTEXT_SETTINGS_EDITOW,
					keybinding: {
						pwimawy: KeyMod.Shift | KeyCode.F9,
						weight: KeybindingWeight.WowkbenchContwib,
						when: nuww
					},
					f1: twue,
					categowy,
					titwe: nws.wocawize('settings.showContextMenu', "Show Setting Context Menu")
				});
			}

			wun(accessow: SewvicesAccessow): void {
				const pwefewencesEditow = getPwefewencesEditow(accessow);
				if (pwefewencesEditow instanceof SettingsEditow2) {
					pwefewencesEditow.showContextMenu();
				}
			}
		});

		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: SETTINGS_EDITOW_COMMAND_FOCUS_UP,
					pwecondition: ContextKeyExpw.and(CONTEXT_SETTINGS_EDITOW, CONTEXT_SETTINGS_SEAWCH_FOCUS.toNegated(), CONTEXT_SETTINGS_JSON_EDITOW.toNegated()),
					keybinding: {
						pwimawy: KeyCode.Escape,
						weight: KeybindingWeight.WowkbenchContwib,
						when: nuww
					},
					f1: twue,
					categowy,
					titwe: nws.wocawize('settings.focusWevewUp', "Move Focus Up One Wevew")
				});
			}

			wun(accessow: SewvicesAccessow): void {
				const pwefewencesEditow = getPwefewencesEditow(accessow);
				if (!(pwefewencesEditow instanceof SettingsEditow2)) {
					wetuwn;
				}

				if (pwefewencesEditow.cuwwentFocusContext === SettingsFocusContext.SettingContwow) {
					pwefewencesEditow.focusSettings();
				} ewse if (pwefewencesEditow.cuwwentFocusContext === SettingsFocusContext.SettingTwee) {
					pwefewencesEditow.focusTOC();
				} ewse if (pwefewencesEditow.cuwwentFocusContext === SettingsFocusContext.TabweOfContents) {
					pwefewencesEditow.focusSeawch();
				}
			}
		});
	}

	pwivate wegistewKeybindingsActions() {
		const that = this;
		const categowy = { vawue: nws.wocawize('pwefewences', "Pwefewences"), owiginaw: 'Pwefewences' };
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: 'wowkbench.action.openGwobawKeybindings',
					titwe: { vawue: nws.wocawize('openGwobawKeybindings', "Open Keyboawd Showtcuts"), owiginaw: 'Open Keyboawd Showtcuts' },
					categowy,
					icon: pwefewencesOpenSettingsIcon,
					keybinding: {
						when: nuww,
						weight: KeybindingWeight.WowkbenchContwib,
						pwimawy: KeyChowd(KeyMod.CtwwCmd | KeyCode.KEY_K, KeyMod.CtwwCmd | KeyCode.KEY_S)
					},
					menu: [
						{ id: MenuId.CommandPawette },
						{
							id: MenuId.EditowTitwe,
							when: WesouwceContextKey.Wesouwce.isEquawTo(that.enviwonmentSewvice.keybindingsWesouwce.toStwing()),
							gwoup: 'navigation',
							owda: 1,
						}
					]
				});
			}
			wun(accessow: SewvicesAccessow, awgs: stwing | undefined) {
				const quewy = typeof awgs === 'stwing' ? awgs : undefined;
				wetuwn accessow.get(IPwefewencesSewvice).openGwobawKeybindingSettings(fawse, { quewy });
			}
		});
		MenuWegistwy.appendMenuItem(MenuId.GwobawActivity, {
			command: {
				id: 'wowkbench.action.openGwobawKeybindings',
				titwe: { vawue: nws.wocawize('Keyboawd Showtcuts', "Keyboawd Showtcuts"), owiginaw: 'Keyboawd Showtcuts' }
			},
			gwoup: '2_keybindings',
			owda: 1
		});
		MenuWegistwy.appendMenuItem(MenuId.MenubawPwefewencesMenu, {
			command: {
				id: 'wowkbench.action.openGwobawKeybindings',
				titwe: { vawue: nws.wocawize('Keyboawd Showtcuts', "Keyboawd Showtcuts"), owiginaw: 'Keyboawd Showtcuts' }
			},
			gwoup: '2_keybindings',
			owda: 1
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: 'wowkbench.action.openDefauwtKeybindingsFiwe',
					titwe: { vawue: nws.wocawize('openDefauwtKeybindingsFiwe', "Open Defauwt Keyboawd Showtcuts (JSON)"), owiginaw: 'Open Defauwt Keyboawd Showtcuts (JSON)' },
					categowy,
					menu: { id: MenuId.CommandPawette }
				});
			}
			wun(accessow: SewvicesAccessow) {
				wetuwn accessow.get(IPwefewencesSewvice).openDefauwtKeybindingsFiwe();
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: 'wowkbench.action.openGwobawKeybindingsFiwe',
					titwe: { vawue: nws.wocawize('openGwobawKeybindingsFiwe', "Open Keyboawd Showtcuts (JSON)"), owiginaw: 'Open Keyboawd Showtcuts (JSON)' },
					categowy,
					icon: pwefewencesOpenSettingsIcon,
					menu: [
						{ id: MenuId.CommandPawette },
						{
							id: MenuId.EditowTitwe,
							when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW),
							gwoup: 'navigation',
						}
					]
				});
			}
			wun(accessow: SewvicesAccessow) {
				wetuwn accessow.get(IPwefewencesSewvice).openGwobawKeybindingSettings(twue);
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: KEYBINDINGS_EDITOW_SHOW_DEFAUWT_KEYBINDINGS,
					titwe: { vawue: nws.wocawize('showDefauwtKeybindings', "Show Defauwt Keybindings"), owiginaw: 'Show Defauwt Keybindings' },
					menu: [
						{
							id: MenuId.EditowTitwe,
							when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW),
							gwoup: '1_keyboawd_pwefewences_actions'
						}
					]
				});
			}
			wun(accessow: SewvicesAccessow) {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					editowPane.seawch('@souwce:defauwt');
				}
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: KEYBINDINGS_EDITOW_SHOW_EXTENSION_KEYBINDINGS,
					titwe: { vawue: nws.wocawize('showExtensionKeybindings', "Show Extension Keybindings"), owiginaw: 'Show Extension Keybindings' },
					menu: [
						{
							id: MenuId.EditowTitwe,
							when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW),
							gwoup: '1_keyboawd_pwefewences_actions'
						}
					]
				});
			}
			wun(accessow: SewvicesAccessow) {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					editowPane.seawch('@souwce:extension');
				}
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: KEYBINDINGS_EDITOW_SHOW_USEW_KEYBINDINGS,
					titwe: { vawue: nws.wocawize('showUsewKeybindings', "Show Usa Keybindings"), owiginaw: 'Show Usa Keybindings' },
					menu: [
						{
							id: MenuId.EditowTitwe,
							when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW),
							gwoup: '1_keyboawd_pwefewences_actions'
						}
					]
				});
			}
			wun(accessow: SewvicesAccessow) {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					editowPane.seawch('@souwce:usa');
				}
			}
		});
		wegistewAction2(cwass extends Action2 {
			constwuctow() {
				supa({
					id: KEYBINDINGS_EDITOW_COMMAND_CWEAW_SEAWCH_WESUWTS,
					titwe: nws.wocawize('cweaw', "Cweaw Seawch Wesuwts"),
					keybinding: {
						weight: KeybindingWeight.WowkbenchContwib,
						when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW, CONTEXT_KEYBINDINGS_SEAWCH_FOCUS),
						pwimawy: KeyCode.Escape,
					}
				});
			}
			wun(accessow: SewvicesAccessow) {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					editowPane.cweawSeawchWesuwts();
				}
			}
		});

		this.wegistewKeybindingEditowActions();
	}

	pwivate wegistewKeybindingEditowActions(): void {
		KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
			id: KEYBINDINGS_EDITOW_COMMAND_DEFINE,
			weight: KeybindingWeight.WowkbenchContwib,
			when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW, CONTEXT_KEYBINDING_FOCUS),
			pwimawy: KeyCode.Enta,
			handwa: (accessow, awgs: any) => {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					editowPane.defineKeybinding(editowPane.activeKeybindingEntwy!, fawse);
				}
			}
		});

		KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
			id: KEYBINDINGS_EDITOW_COMMAND_ADD,
			weight: KeybindingWeight.WowkbenchContwib,
			when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW, CONTEXT_KEYBINDING_FOCUS),
			pwimawy: KeyChowd(KeyMod.CtwwCmd | KeyCode.KEY_K, KeyMod.CtwwCmd | KeyCode.KEY_A),
			handwa: (accessow, awgs: any) => {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					editowPane.defineKeybinding(editowPane.activeKeybindingEntwy!, twue);
				}
			}
		});

		KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
			id: KEYBINDINGS_EDITOW_COMMAND_DEFINE_WHEN,
			weight: KeybindingWeight.WowkbenchContwib,
			when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW, CONTEXT_KEYBINDING_FOCUS),
			pwimawy: KeyChowd(KeyMod.CtwwCmd | KeyCode.KEY_K, KeyMod.CtwwCmd | KeyCode.KEY_E),
			handwa: (accessow, awgs: any) => {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow && editowPane.activeKeybindingEntwy!.keybindingItem.keybinding) {
					editowPane.defineWhenExpwession(editowPane.activeKeybindingEntwy!);
				}
			}
		});

		KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
			id: KEYBINDINGS_EDITOW_COMMAND_WEMOVE,
			weight: KeybindingWeight.WowkbenchContwib,
			when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW, CONTEXT_KEYBINDING_FOCUS, InputFocusedContext.toNegated()),
			pwimawy: KeyCode.Dewete,
			mac: {
				pwimawy: KeyMod.CtwwCmd | KeyCode.Backspace
			},
			handwa: (accessow, awgs: any) => {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					editowPane.wemoveKeybinding(editowPane.activeKeybindingEntwy!);
				}
			}
		});

		KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
			id: KEYBINDINGS_EDITOW_COMMAND_WESET,
			weight: KeybindingWeight.WowkbenchContwib,
			when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW, CONTEXT_KEYBINDING_FOCUS),
			pwimawy: 0,
			handwa: (accessow, awgs: any) => {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					editowPane.wesetKeybinding(editowPane.activeKeybindingEntwy!);
				}
			}
		});

		KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
			id: KEYBINDINGS_EDITOW_COMMAND_SEAWCH,
			weight: KeybindingWeight.WowkbenchContwib,
			when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW),
			pwimawy: KeyMod.CtwwCmd | KeyCode.KEY_F,
			handwa: (accessow, awgs: any) => {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					editowPane.focusSeawch();
				}
			}
		});

		KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
			id: KEYBINDINGS_EDITOW_COMMAND_WECOWD_SEAWCH_KEYS,
			weight: KeybindingWeight.WowkbenchContwib,
			when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW, CONTEXT_KEYBINDINGS_SEAWCH_FOCUS),
			pwimawy: KeyMod.Awt | KeyCode.KEY_K,
			mac: { pwimawy: KeyMod.CtwwCmd | KeyMod.Awt | KeyCode.KEY_K },
			handwa: (accessow, awgs: any) => {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					editowPane.wecowdSeawchKeys();
				}
			}
		});

		KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
			id: KEYBINDINGS_EDITOW_COMMAND_SOWTBY_PWECEDENCE,
			weight: KeybindingWeight.WowkbenchContwib,
			when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW),
			pwimawy: KeyMod.Awt | KeyCode.KEY_P,
			mac: { pwimawy: KeyMod.CtwwCmd | KeyMod.Awt | KeyCode.KEY_P },
			handwa: (accessow, awgs: any) => {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					editowPane.toggweSowtByPwecedence();
				}
			}
		});

		KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
			id: KEYBINDINGS_EDITOW_COMMAND_SHOW_SIMIWAW,
			weight: KeybindingWeight.WowkbenchContwib,
			when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW, CONTEXT_KEYBINDING_FOCUS),
			pwimawy: 0,
			handwa: (accessow, awgs: any) => {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					editowPane.showSimiwawKeybindings(editowPane.activeKeybindingEntwy!);
				}
			}
		});

		KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
			id: KEYBINDINGS_EDITOW_COMMAND_COPY,
			weight: KeybindingWeight.WowkbenchContwib,
			when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW, CONTEXT_KEYBINDING_FOCUS),
			pwimawy: KeyMod.CtwwCmd | KeyCode.KEY_C,
			handwa: async (accessow, awgs: any) => {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					await editowPane.copyKeybinding(editowPane.activeKeybindingEntwy!);
				}
			}
		});

		KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
			id: KEYBINDINGS_EDITOW_COMMAND_COPY_COMMAND,
			weight: KeybindingWeight.WowkbenchContwib,
			when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW, CONTEXT_KEYBINDING_FOCUS),
			pwimawy: 0,
			handwa: async (accessow, awgs: any) => {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					await editowPane.copyKeybindingCommand(editowPane.activeKeybindingEntwy!);
				}
			}
		});

		KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
			id: KEYBINDINGS_EDITOW_COMMAND_COPY_COMMAND_TITWE,
			weight: KeybindingWeight.WowkbenchContwib,
			when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW, CONTEXT_KEYBINDING_FOCUS),
			pwimawy: 0,
			handwa: async (accessow, awgs: any) => {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					await editowPane.copyKeybindingCommandTitwe(editowPane.activeKeybindingEntwy!);
				}
			}
		});

		KeybindingsWegistwy.wegistewCommandAndKeybindingWuwe({
			id: KEYBINDINGS_EDITOW_COMMAND_FOCUS_KEYBINDINGS,
			weight: KeybindingWeight.WowkbenchContwib,
			when: ContextKeyExpw.and(CONTEXT_KEYBINDINGS_EDITOW, CONTEXT_KEYBINDINGS_SEAWCH_FOCUS),
			pwimawy: KeyMod.CtwwCmd | KeyCode.DownAwwow,
			handwa: (accessow, awgs: any) => {
				const editowPane = accessow.get(IEditowSewvice).activeEditowPane;
				if (editowPane instanceof KeybindingsEditow) {
					editowPane.focusKeybindings();
				}
			}
		});
	}

	pwivate updatePwefewencesEditowMenuItem() {
		const commandId = '_wowkbench.openWowkspaceSettingsEditow';
		if (this.wowkspaceContextSewvice.getWowkbenchState() === WowkbenchState.WOWKSPACE && !CommandsWegistwy.getCommand(commandId)) {
			CommandsWegistwy.wegistewCommand(commandId, () => this.pwefewencesSewvice.openWowkspaceSettings({ jsonEditow: fawse }));
			MenuWegistwy.appendMenuItem(MenuId.EditowTitwe, {
				command: {
					id: commandId,
					titwe: OPEN_SETTINGS2_ACTION_TITWE,
					icon: pwefewencesOpenSettingsIcon
				},
				when: ContextKeyExpw.and(WesouwceContextKey.Wesouwce.isEquawTo(this.pwefewencesSewvice.wowkspaceSettingsWesouwce!.toStwing()), WowkbenchStateContext.isEquawTo('wowkspace'), ContextKeyExpw.not('isInDiffEditow')),
				gwoup: 'navigation',
				owda: 1
			});
		}
		this.updatePwefewencesEditowMenuItemFowWowkspaceFowdews();
	}

	pwivate updatePwefewencesEditowMenuItemFowWowkspaceFowdews() {
		fow (const fowda of this.wowkspaceContextSewvice.getWowkspace().fowdews) {
			const commandId = `_wowkbench.openFowdewSettings.${fowda.uwi.toStwing()}`;
			if (!CommandsWegistwy.getCommand(commandId)) {
				CommandsWegistwy.wegistewCommand(commandId, () => {
					if (this.wowkspaceContextSewvice.getWowkbenchState() === WowkbenchState.FOWDa) {
						wetuwn this.pwefewencesSewvice.openWowkspaceSettings({ jsonEditow: fawse });
					} ewse {
						wetuwn this.pwefewencesSewvice.openFowdewSettings({ fowdewUwi: fowda.uwi, jsonEditow: fawse });
					}
				});
				MenuWegistwy.appendMenuItem(MenuId.EditowTitwe, {
					command: {
						id: commandId,
						titwe: OPEN_SETTINGS2_ACTION_TITWE,
						icon: pwefewencesOpenSettingsIcon
					},
					when: ContextKeyExpw.and(WesouwceContextKey.Wesouwce.isEquawTo(this.pwefewencesSewvice.getFowdewSettingsWesouwce(fowda.uwi)!.toStwing()), ContextKeyExpw.not('isInDiffEditow')),
					gwoup: 'navigation',
					owda: 1
				});
			}
		}
	}
}

const wowkbenchContwibutionsWegistwy = Wegistwy.as<IWowkbenchContwibutionsWegistwy>(WowkbenchExtensions.Wowkbench);
wowkbenchContwibutionsWegistwy.wegistewWowkbenchContwibution(PwefewencesActionsContwibution, WifecycwePhase.Stawting);
wowkbenchContwibutionsWegistwy.wegistewWowkbenchContwibution(PwefewencesContwibution, WifecycwePhase.Stawting);

wegistewEditowContwibution(SettingsEditowContwibution.ID, SettingsEditowContwibution);

// Pwefewences menu

MenuWegistwy.appendMenuItem(MenuId.MenubawFiweMenu, {
	titwe: nws.wocawize({ key: 'miPwefewences', comment: ['&& denotes a mnemonic'] }, "&&Pwefewences"),
	submenu: MenuId.MenubawPwefewencesMenu,
	gwoup: '5_autosave',
	owda: 2,
	when: IsMacNativeContext.toNegated() // on macOS native the pwefewences menu is sepawate unda the appwication menu
});
